<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuraci√≥n de Jugadores - Monopoly</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Estilos espec√≠ficos -->
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/configuracion.css">
    <link rel="stylesheet" href="../../../views/modal/modal.css">
    <link rel="stylesheet" href="../../../views/modals/registroUsuaros.css">
    
    <!-- Toast System -->
    <link rel="stylesheet" href="../../../views/toast/toast.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../../assets/icons/favicon.ico">
</head>
<body>
    <div class="configuracion-container">
        
        <!-- Header Principal -->
        <div class="configuracion-header">
            <h1 class="configuracion-title">‚ö° Configuraci√≥n del Juego</h1>
            <p class="configuracion-subtitle">Configura tus jugadores para comenzar la aventura</p>
        </div>

        <!-- Secci√≥n de Jugadores -->
        <div class="jugadores-section">
            <div class="jugadores-header">
                <div>
                    <h2 style="margin: 0; color: #374151; font-size: 1.5rem; font-weight: 600;">üë• Jugadores</h2>
                    <div class="jugadores-count" id="contadorJugadores">
                        0 / 4 jugadores
                    </div>
                </div>
                <button class="agregar-jugador-btn" id="agregarBtn">
                    <span>‚ûï</span>
                    Agregar Jugador
                </button>
            </div>
            
            <!-- Lista de jugadores -->
            <div class="jugadores-grid" id="jugadores">
                <!-- Los jugadores se renderizan din√°micamente aqu√≠ -->
                <div class="empty-state" id="emptyState">
                    <div class="empty-state-icon">üé≠</div>
                    <p class="empty-state-text">No hay jugadores configurados</p>
                    <p style="font-size: 0.9rem; color: #6b7280;">Haz clic en "Agregar Jugador" para comenzar</p>
                </div>
            </div>
        </div>

        <!-- Informaci√≥n del Juego -->
        <div class="configuracion-form">
            <h3 style="color: #374151; margin-bottom: 20px; display: flex; align-items: center; gap: 8px;">
                <span>‚ÑπÔ∏è</span>
                Reglas del Juego
            </h3>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div style="background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 16px;">
                        <h5 style="color: #0369a1; margin-bottom: 8px;">üí∞ Dinero Inicial</h5>
                        <p style="color: #075985; margin: 0;">Cada jugador comienza con <strong>$1,500</strong></p>
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <div style="background: #f0fdf4; border: 1px solid #22c55e; border-radius: 8px; padding: 16px;">
                        <h5 style="color: #15803d; margin-bottom: 8px;">üë• Jugadores</h5>
                        <p style="color: #166534; margin: 0;">M√≠nimo <strong>2</strong>, m√°ximo <strong>4 jugadores</strong></p>
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <div style="background: #fefce8; border: 1px solid #eab308; border-radius: 8px; padding: 16px;">
                        <h5 style="color: #a16207; margin-bottom: 8px;">üéØ Objetivo</h5>
                        <p style="color: #92400e; margin: 0;">Ser el √∫ltimo jugador en pie</p>
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <div style="background: #fdf2f8; border: 1px solid #ec4899; border-radius: 8px; padding: 16px;">
                        <h5 style="color: #be185d; margin-bottom: 8px;">üè† Propiedades</h5>
                        <p style="color: #9d174d; margin: 0;">Compra, construye y cobra rentas</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Acciones Principales -->
        <div class="acciones-container">
            <div class="d-flex flex-column flex-md-row gap-3 justify-content-center align-items-center">
                <button class="btn-secondary" onclick="volverAtras()">
                    ‚¨ÖÔ∏è Volver
                </button>
                
                <button class="btn-primary" id="comenzarJuegoBtn" onclick="guardarJugadores()" disabled>
                    <span>üöÄ</span>
                    Comenzar Juego
                </button>
                
                <button class="btn-secondary" onclick="navegarAPagina('como-jugar')">
                    üìñ C√≥mo Jugar
                </button>
            </div>
            
            <p style="margin-top: 16px; color: #6b7280; font-size: 0.9rem; text-align: center;">
                Configura al menos 2 jugadores para habilitar el bot√≥n "Comenzar Juego"
            </p>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Toast System -->
    <script src="../../../views/toast/toast.js"></script>
    
    <!-- Scripts de la aplicaci√≥n -->
    <script src="../app.js"></script>
    <script src="../../../views/modal/modal.js"></script>
    <script src="../../../views/modals/registroUsuarios.js"></script>
    <script src="../../../../../services/countriesService.js"></script>
    <script src="configuracion.js"></script>
    
    <script>
        // Inicializaci√≥n espec√≠fica de la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('P√°gina de configuraci√≥n cargada');
            
            // Actualizar contador inicial
            actualizarContadorJugadores();
            
            // Mostrar/ocultar estado vac√≠o
            actualizarEstadoVacio();
        });
        
        // Funci√≥n para actualizar el contador de jugadores
        function actualizarContadorJugadores() {
            const contador = document.getElementById('contadorJugadores');
            const btnComenzar = document.getElementById('comenzarJuegoBtn');
            
            if (contador) {
                const numJugadores = window.jugadores ? window.jugadores.length : 0;
                contador.textContent = `${numJugadores} / 4 jugadores`;
                
                // Habilitar/deshabilitar bot√≥n comenzar
                if (btnComenzar) {
                    btnComenzar.disabled = numJugadores < 2;
                }
            }
        }
        
        // Funci√≥n para mostrar/ocultar estado vac√≠o
        function actualizarEstadoVacio() {
            const emptyState = document.getElementById('emptyState');
            const numJugadores = window.jugadores ? window.jugadores.length : 0;
            
            if (emptyState) {
                emptyState.style.display = numJugadores === 0 ? 'block' : 'none';
            }
        }
        
        // Override de la funci√≥n original para incluir actualizaciones de UI
        const actualizarListaJugadoresOriginal = window.actualizarListaJugadores;
        window.actualizarListaJugadores = function() {
            if (typeof actualizarListaJugadoresOriginal === 'function') {
                actualizarListaJugadoresOriginal();
            }
            actualizarContadorJugadores();
            actualizarEstadoVacio();
        };
    </script>
</body>
</html>